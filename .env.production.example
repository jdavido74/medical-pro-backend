# =============================================================================
# MedicalPro Backend - Production Environment Configuration
# =============================================================================
# IMPORTANT: This is a TEMPLATE. Copy to .env and fill in actual values.
# NEVER commit the actual .env file to version control!
#
# For production, secrets should be loaded from /root/.secrets/ files
# using /etc/profile.d/medicalpro-env.sh
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3001
API_VERSION=v1

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Note: DB_PASSWORD should be loaded from /root/.secrets/db_password
DB_HOST=localhost
DB_PORT=5432
DB_USER=medicalpro
# DB_PASSWORD loaded from environment (see /etc/profile.d/medicalpro-env.sh)
DB_DIALECT=postgres
CENTRAL_DB_NAME=medicalpro_central

# Clinic databases are created dynamically as: medicalpro_clinic_<uuid>

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# Note: JWT secrets should be loaded from /root/.secrets/jwt_secret and jwt_refresh_secret
# JWT_SECRET loaded from environment
# JWT_REFRESH_SECRET loaded from environment
JWT_EXPIRE=24h
JWT_REFRESH_EXPIRE=7d

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Production domain(s) - adjust to your actual domain
CORS_ORIGIN=https://app.votreclinique.es

# -----------------------------------------------------------------------------
# Rate Limiting (API Protection)
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
# Configure according to your email provider (SendGrid, Mailgun, OVH, etc.)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
# SMTP_PASSWORD should be set as environment variable or secret
FROM_EMAIL=noreply@votreclinique.es

# -----------------------------------------------------------------------------
# Application URLs
# -----------------------------------------------------------------------------
APP_URL=https://app.votreclinique.es
FRONTEND_URL=https://app.votreclinique.es

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FILE=logs/app.log

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Trust proxy for correct IP detection behind Nginx
TRUST_PROXY=true

# Session cookie settings
COOKIE_SECURE=true
COOKIE_SAMESITE=strict
